{% extends 'base/base.html' %}
{% load static %}

{% block extrastyle %}
<link rel="stylesheet" type="text/css" href="{% static 'assignment/prism.css' %}">
{% endblock %}

{% block content %}
<div class="container-fluid py-3">
    {% block msg %}

    {% endblock %}
    <h1>서강대학교 멋쟁이 사자처럼 과제 시스템</h1>
    <h1 class="main-color">{{ assignment.name }}</h1>
    <div class="d-flex">
        <span class="sub-color">{{ assignment.due_date }} 마감</span>
        {% if not timeup %}
        <a class="main-color ml-auto" href="{% url 'assignment-submit' pk=assignment.pk %}">+ 코드/링크 제출하기</a>
        <a class="main-color ml-3" href="{% url 'assignment-submit-image' pk=assignment.pk %}">+ 이미지 제출하기</a>
        {% endif %}
    </div>
    <div>
        {% if assignment.materials %}
        <a class="btn btn-main" href="{{ assignment.materials.url }}" download="">자료 다운로드</a>
        {% endif %}
    </div>
    <hr>
    {% block assignment-block %}
    <div>
        <h1>제출 리스트</h1>
        {% for submit in submits %}
        <div class="card">
            <div class="card-body">
                <h3 class="card-title">{{ submit.title }}</h3>
                <h5 class="card-text sub-color">{{ submit.timestamp }}</h5>
                <a class="btn btn-main" data-toggle="collapse" href="#submit-{{ submit.pk }}" role="button" aria-expanded="false" aria-controls="submit-{{ submit.pk }}">보기</a>
                <a class="btn btn-main" href="{% url 'assignment-submit-update' pk=submit.pk %}">편집</a>
                <a class="btn btn-main" href="{% url 'assignment-submit-delete' pk=submit.pk %}">삭제</a>
                <div class="collapse py-3" id="submit-{{ submit.pk }}">
                    <div class="card card-body">
                        {% if submit.language < 5 %}
                        <pre class="language-{{ submit.get_language_display }}"><code>{{ submit.content }}</code></pre>
                        {% elif submit.language == 5 %}
                        <a href="{{ submit.content }}" target="_blank">{{ submit.content }}</a>
                        {% elif submit.language == 6 %}
                        {% if submit.submitimage.image %}
                        <img class="col-12" src="{{ submit.submitimage.image.url }}">
                        {% endif %}
                        {% endif %}
                    </div>
                </div>
            </div>
        </div>
        {% endfor %}
    </div>
    {% endblock %}
</div>
<script src="{% static 'assignment/prism.js' %}"></script>
{% endblock %}